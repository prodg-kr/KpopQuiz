<!DOCTYPE html>

<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>K-pop Quiz Game - ë‹¹ì‹ ì€ K-pop ë§ˆìŠ¤í„°ì¸ê°€ìš”?</title>
  <meta name="description" content="BTS, BLACKPINK, NewJeans ë“± K-pop ì•„í‹°ìŠ¤íŠ¸ì— ëŒ€í•œ ì§€ì‹ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”! ì¬ë¯¸ìˆëŠ” K-pop í€´ì¦ˆ ê²Œì„.">
  <meta name="keywords" content="K-pop, í€´ì¦ˆ, BTS, BLACKPINK, NewJeans, ì¼€ì´íŒ, ê²Œì„">

  <meta property="og:type" content="website">
  <meta property="og:title" content="K-pop Quiz Game">
  <meta property="og:description" content="ë‹¹ì‹ ì˜ K-pop ì§€ì‹ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!">

  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤</text></svg>">

  <style>
    :root {
      --bg: #0f1220;
      --card: #171a2b;
      --accent: #7c5cff;
      --accent-2: #ff5c9a;
      --text: #e9e9f1;
      --muted: #a9a9c7;
      --correct: #2ecc71;
      --wrong: #e74c3c;
    }
    
    * { 
      box-sizing: border-box; 
      margin: 0;
      padding: 0;
    }
    
    body {
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: radial-gradient(1200px 600px at 20% 20%, #1b1f36 0%, var(--bg) 60%);
      color: var(--text);
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.6;
      padding: 20px 10px;
    }
    
    .container {
      width: min(720px, 100%);
      background: linear-gradient(180deg, rgba(124,92,255,0.08), rgba(255,92,154,0.08)), var(--card);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
      position: relative;
      overflow: hidden;
    }
    
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }
    
    .title {
      font-weight: 700;
      letter-spacing: 0.2px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 20px;
    }
    
    .title .badge {
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(124,92,255,0.18);
      color: #d9d6ff;
      border: 1px solid rgba(124,92,255,0.35);
    }
    
    .meta {
      display: flex;
      gap: 10px;
      align-items: center;
      color: var(--muted);
      font-size: 14px;
    }
    
    .pill {
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      white-space: nowrap;
    }

    .difficulty-selector {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      padding: 12px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 10px;
    }

    .difficulty-btn {
      flex: 1;
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      cursor: pointer;
      font-family: inherit;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s ease;
    }

    .difficulty-btn:hover {
      background: rgba(255,255,255,0.1);
      transform: translateY(-1px);
    }

    .difficulty-btn.active {
      background: linear-gradient(180deg, rgba(124,92,255,0.3), rgba(124,92,255,0.2));
      border-color: var(--accent);
      color: #d9d6ff;
    }
    
    .question-card {
      margin-top: 8px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      padding: 18px;
    }

    .category-badge {
      display: inline-block;
      padding: 4px 10px;
      margin-bottom: 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .category-artist { background: rgba(255,92,154,0.2); color: #ffadd2; }
    .category-song { background: rgba(124,92,255,0.2); color: #c9b3ff; }
    .category-album { background: rgba(46,204,113,0.2); color: #7cf5b8; }
    .category-general { background: rgba(52,152,219,0.2); color: #85d7ff; }
    
    .question {
      font-size: 20px;
      font-weight: 600;
      line-height: 1.4;
      margin-bottom: 16px;
    }
    
    .options {
      display: grid;
      gap: 10px;
    }
    
    .option {
      width: 100%;
      text-align: left;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      cursor: pointer;
      transition: transform 0.08s ease, background 0.2s ease, border 0.2s ease;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 16px;
      font-family: inherit;
    }
    
    .option:hover:not(.disabled) { 
      transform: translateY(-1px); 
      background: rgba(255,255,255,0.1);
    }
    
    .option:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }
    
    .option.disabled { 
      cursor: not-allowed; 
      opacity: 0.7; 
    }
    
    .option.correct {
      background: rgba(46, 204, 113, 0.15);
      border-color: rgba(46, 204, 113, 0.6);
      animation: correctPulse 0.5s ease;
    }
    
    .option.wrong {
      background: rgba(231, 76, 60, 0.15);
      border-color: rgba(231, 76, 60, 0.6);
      animation: shake 0.5s ease;
    }
    
    @keyframes correctPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    .option-label {
      font-weight: 600;
      min-width: 24px;
    }
    
    .feedback {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 8px;
      font-size: 14px;
      line-height: 1.5;
      display: none;
    }
    
    .feedback.show {
      display: block;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .feedback.correct {
      background: rgba(46, 204, 113, 0.1);
      border: 1px solid rgba(46, 204, 113, 0.3);
      color: #5ce8a8;
    }
    
    .feedback.wrong {
      background: rgba(231, 76, 60, 0.1);
      border: 1px solid rgba(231, 76, 60, 0.3);
      color: #ff8c82;
    }
    
    .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
      gap: 10px;
    }
    
    .progress {
      height: 8px;
      background: rgba(255,255,255,0.08);
      border-radius: 999px;
      overflow: hidden;
      margin-top: 10px;
    }
    
    .progress > div {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width 0.4s ease;
    }
    
    .btn {
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.14);
      background: linear-gradient(180deg, rgba(124,92,255,0.25), rgba(124,92,255,0.15));
      color: #fff;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.08s ease, filter 0.2s ease;
      font-family: inherit;
      font-size: 14px;
    }
    
    .btn:hover:not(:disabled) { 
      transform: translateY(-1px); 
      filter: brightness(1.05); 
    }
    
    .btn:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .btn.secondary {
      background: rgba(255,255,255,0.06);
    }
    
    .result {
      text-align: center;
      padding: 24px 12px;
    }
    
    .result h2 {
      margin: 0 0 8px;
      font-size: 24px;
    }
    
    .result p {
      color: var(--muted);
      margin: 0 0 16px;
    }
    
    .result .emoji {
      font-size: 64px;
      margin-bottom: 16px;
      animation: popIn 0.5s ease;
    }
    
    @keyframes popIn {
      0% { transform: scale(0); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    
    .score-breakdown {
      display: inline-block;
      margin: 16px 0;
      padding: 12px 20px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 10px;
      font-size: 18px;
      font-weight: 600;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
      margin: 16px 0;
    }

    .stat-card {
      padding: 10px;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 8px;
      text-align: center;
    }

    .stat-label {
      font-size: 11px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-value {
      font-size: 20px;
      font-weight: 700;
      margin-top: 4px;
    }
    
    .tiny {
      font-size: 12px;
      color: var(--muted);
      margin-top: 12px;
    }
    
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    
    .keyboard-hint {
      font-size: 11px;
      color: var(--muted);
      text-align: center;
      margin-top: 10px;
      opacity: 0.7;
      line-height: 1.5;
    }

    .start-screen {
      text-align: center;
      padding: 24px 12px;
    }

    .start-screen h2 {
      font-size: 28px;
      margin-bottom: 12px;
    }

    .start-screen p {
      color: var(--muted);
      margin-bottom: 24px;
    }

    .db-info {
      display: inline-block;
      padding: 8px 14px;
      margin: 16px 0;
      background: rgba(124,92,255,0.1);
      border: 1px solid rgba(124,92,255,0.3);
      border-radius: 8px;
      font-size: 13px;
      color: #c9b3ff;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: var(--muted);
    }

    .error {
      text-align: center;
      padding: 40px;
      color: var(--wrong);
    }
    
    @media (max-width: 640px) {
      .container {
        padding: 20px;
      }
      
      .header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .title {
        font-size: 18px;
      }
      
      .question {
        font-size: 18px;
      }
      
      .option {
        font-size: 15px;
        padding: 10px 12px;
      }
      
      .footer {
        flex-direction: column-reverse;
        gap: 8px;
      }
      
      .btn {
        width: 100%;
      }
      
      .keyboard-hint {
        display: none;
      }
      
      .result .emoji {
        font-size: 48px;
      }

      .difficulty-selector {
        flex-direction: column;
      }
    }
  </style>

</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">
        K-pop Quiz
        <span class="badge" aria-label="ê°ê´€ì‹ í€´ì¦ˆ">Multiple Choice</span>
      </h1>
      <div class="meta" role="status" aria-live="polite">
        <span class="pill" id="score" aria-label="í˜„ì¬ ì ìˆ˜">ì ìˆ˜: 0</span>
        <span class="pill" id="qIndex" aria-label="ë¬¸ì œ ë²ˆí˜¸">ë¬¸ì œ: 0 / 0</span>
      </div>
    </header>

```
<div class="loading" id="loading">
  <p>ğŸ“š ë¬¸ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
</div>

<div class="error" id="error" style="display:none;">
  <p>âš ï¸ ë¬¸ì œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
  <p style="font-size: 12px; margin-top: 8px;">questions.json íŒŒì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
</div>

<section class="start-screen" id="startScreen" style="display:none;">
  <h2>ğŸ¤ K-pop Quizì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h2>
  <p>ë‚œì´ë„ë¥¼ ì„ íƒí•˜ê³  ì‹œì‘í•˜ì„¸ìš”</p>
  <div class="db-info" id="dbInfo">ë¬¸ì œ DB ë¡œë”© ì¤‘...</div>
  
  <div class="difficulty-selector">
    <button class="difficulty-btn active" data-difficulty="easy">
      ğŸŒ± ì‰¬ì›€<br><small>10ë¬¸ì œ</small>
    </button>
    <button class="difficulty-btn" data-difficulty="medium">
      â­ ë³´í†µ<br><small>15ë¬¸ì œ</small>
    </button>
    <button class="difficulty-btn" data-difficulty="hard">
      ğŸ”¥ ì–´ë ¤ì›€<br><small>20ë¬¸ì œ</small>
    </button>
  </div>
  
  <button class="btn" id="startBtn" style="margin-top: 12px; padding: 12px 24px;">í€´ì¦ˆ ì‹œì‘í•˜ê¸°</button>
</section>

<main class="question-card" id="questionCard" style="display:none;">
  <span class="category-badge" id="categoryBadge"></span>
  <h2 class="question" id="question">ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</h2>
  <div class="options" id="options" role="radiogroup" aria-label="ë‹µì•ˆ ì„ íƒ"></div>
  <div class="feedback" id="feedback" role="alert"></div>
  <footer class="footer">
    <button class="btn secondary" id="skipBtn" aria-label="í˜„ì¬ ë¬¸ì œ ê±´ë„ˆë›°ê¸°">ê±´ë„ˆë›°ê¸°</button>
    <button class="btn" id="nextBtn" disabled aria-label="ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™">ë‹¤ìŒ ë¬¸ì œ</button>
  </footer>
  <div class="progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="í€´ì¦ˆ ì§„í–‰ë¥ ">
    <div id="progressBar"></div>
  </div>
  <p class="keyboard-hint">ğŸ’¡ í‚¤ë³´ë“œ: 1-4 (ë‹µë³€), Enter (ë‹¤ìŒ), S (ê±´ë„ˆë›°ê¸°)</p>
</main>

<section class="result" id="result" style="display:none;" role="status" aria-live="polite">
  <div class="emoji" id="resultEmoji"></div>
  <h2>í€´ì¦ˆ ì™„ë£Œ!</h2>
  <div class="score-breakdown" id="scoreBreakdown"></div>
  
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-label">ì •ë‹µë¥ </div>
      <div class="stat-value" id="accuracy">0%</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">ë‚œì´ë„</div>
      <div class="stat-value" id="difficultyDisplay">-</div>
    </div>
  </div>
  
  <p id="finalText"></p>
  <button class="btn" id="restartBtn">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
  <p class="tiny">ğŸ’¡ ë¬¸ì œëŠ” DBì—ì„œ ìë™ìœ¼ë¡œ ì„ íƒë©ë‹ˆë‹¤</p>
</section>
```

  </div>

  <script>
    // ==================== ì„¤ì • ====================
    const DIFFICULTY_SETTINGS = {
      easy: { questionCount: 10, label: "ì‰¬ì›€", emoji: "ğŸŒ±" },
      medium: { questionCount: 15, label: "ë³´í†µ", emoji: "â­" },
      hard: { questionCount: 20, label: "ì–´ë ¤ì›€", emoji: "ğŸ”¥" }
    };

    const SCORE_PER_QUESTION = 1;
    const PASSING_SCORE_RATIO = 0.5;
    const EXCELLENT_SCORE_RATIO = 0.8;
    const PERFECT_SCORE_RATIO = 1.0;
    const OPTION_LABEL_START = 65;

    // ==================== DOM ìš”ì†Œ ====================
    const elements = {
      loading: document.getElementById("loading"),
      error: document.getElementById("error"),
      startScreen: document.getElementById("startScreen"),
      startBtn: document.getElementById("startBtn"),
      dbInfo: document.getElementById("dbInfo"),
      question: document.getElementById("question"),
      options: document.getElementById("options"),
      nextBtn: document.getElementById("nextBtn"),
      skipBtn: document.getElementById("skipBtn"),
      score: document.getElementById("score"),
      qIndex: document.getElementById("qIndex"),
      progressBar: document.getElementById("progressBar"),
      questionCard: document.getElementById("questionCard"),
      result: document.getElementById("result"),
      finalText: document.getElementById("finalText"),
      scoreBreakdown: document.getElementById("scoreBreakdown"),
      resultEmoji: document.getElementById("resultEmoji"),
      restartBtn: document.getElementById("restartBtn"),
      feedback: document.getElementById("feedback"),
      categoryBadge: document.getElementById("categoryBadge"),
      accuracy: document.getElementById("accuracy"),
      difficultyDisplay: document.getElementById("difficultyDisplay")
    };

    // ==================== ì „ì—­ ë³€ìˆ˜ ====================
    let QUESTION_DB = null;
    let gameState = {
      selectedQuestions: [],
      current: 0,
      score: 0,
      locked: false,
      difficulty: "easy",
      totalQuestions: 0
    };

    // ==================== DB ë¡œë“œ ====================
    async function loadQuestionDB() {
      try {
        const response = await fetch('questions.json');
        if (!response.ok) {
          throw new Error('Failed to load questions.json');
        }
        QUESTION_DB = await response.json();
        
        elements.loading.style.display = "none";
        elements.startScreen.style.display = "block";
        
        const total = getTotalQuestionsInDB();
        elements.dbInfo.textContent = `ğŸ“š ì´ ${total}ê°œì˜ ë¬¸ì œê°€ DBì— ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤ (v${QUESTION_DB.version})`;
      } catch (err) {
        console.error('Error loading questions:', err);
        elements.loading.style.display = "none";
        elements.error.style.display = "block";
      }
    }

    // ==================== DB ê´€ë¦¬ í•¨ìˆ˜ ====================
    function getTotalQuestionsInDB() {
      if (!QUESTION_DB || !QUESTION_DB.categories) return 0;
      return Object.values(QUESTION_DB.categories).reduce((total, category) => total + category.length, 0);
    }

    function getQuestionsByDifficulty(difficulty) {
      const questions = [];
      for (const [category, categoryQuestions] of Object.entries(QUESTION_DB.categories)) {
        categoryQuestions.forEach(q => {
          if (q.difficulty === difficulty) {
            questions.push({ ...q, category });
          }
        });
      }
      return questions;
    }

    function generateQuizQuestions(difficulty) {
      const availableQuestions = getQuestionsByDifficulty(difficulty);
      const questionCount = DIFFICULTY_SETTINGS[difficulty].questionCount;
      
      if (availableQuestions.length < questionCount) {
        console.warn(`Not enough ${difficulty} questions. Using all available.`);
        return shuffle(availableQuestions);
      }
      
      const shuffled = shuffle(availableQuestions);
      return shuffled.slice(0, questionCount);
    }

    // ==================== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ====================
    function shuffle(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function getCategoryClass(category) {
      return `category-${category}`;
    }

    function getCategoryLabel(category) {
      const labels = {
        artist: "ì•„í‹°ìŠ¤íŠ¸",
        song: "ë…¸ë˜",
        album: "ì•¨ë²”",
        general: "ì¼ë°˜"
      };
      return labels[category] || category;
    }

    // ==================== ë‚œì´ë„ ì„ íƒ ====================
    document.querySelectorAll('.difficulty-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.difficulty-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        gameState.difficulty = btn.dataset.difficulty;
      });
    });

    // ==================== ê²Œì„ ì´ˆê¸°í™” ====================
    function init() {
      gameState.selectedQuestions = generateQuizQuestions(gameState.difficulty);
      gameState.totalQuestions = gameState.selectedQuestions.length;
      gameState.current = 0;
      gameState.score = 0;
      gameState.locked = false;
      
      elements.startScreen.style.display = "none";
      elements.result.style.display = "none";
      elements.questionCard.style.display = "block";
      elements.feedback.classList.remove('show', 'correct', 'wrong');
      
      updateUI();
      renderQuestion();
    }

    function updateUI() {
      elements.score.textContent = `ì ìˆ˜: ${gameState.score}`;
      elements.qIndex.textContent = `ë¬¸ì œ: ${gameState.current + 1} / ${gameState.totalQuestions}`;
      
      const progress = ((gameState.current + 1) / gameState.totalQuestions) * 100;
      elements.progressBar.style.width = `${progress}%`;
      elements.progressBar.parentElement.setAttribute('aria-valuenow', Math.round(progress));
    }

    function renderQuestion() {
      elements.nextBtn.disabled = true;
      elements.options.innerHTML = "";
      elements.feedback.classList.remove('show', 'correct', 'wrong');
      gameState.locked = false;

      const questionData = gameState.selectedQuestions[gameState.current];
      
      elements.categoryBadge.textContent = getCategoryLabel(questionData.category);
      elements.categoryBadge.className = `category-badge ${getCategoryClass(questionData.category)}`;
      
      elements.question.textContent = questionData.question;

      questionData.options.forEach((optionText, idx) => {
        const button = document.createElement("button");
        button.className = "option";
        button.setAttribute('role', 'radio');
        button.setAttribute('aria-checked', 'false');
        button.dataset.index = idx;
        
        const label = String.fromCharCode(OPTION_LABEL_START + idx);
        button.innerHTML = `
          <span class="pill option-label" aria-hidden="true">${label}</span>
          <span>${optionText}</span>
        `;
        
        button.setAttribute('aria-label', `${label}ë²ˆ: ${optionText}`);
        button.addEventListener("click", () => selectAnswer(idx, button));
        elements.options.appendChild(button);
      });
      
      if (elements.options.firstChild) {
        elements.options.firstChild.focus();
      }
    }

    function selectAnswer(choiceIdx, selectedButton) {
      if (gameState.locked) return;
      gameState.locked = true;

      const questionData = gameState.selectedQuestions[gameState.current];
      const optionButtons = [...elements.options.children];
      const isCorrect = choiceIdx === questionData.answer;

      optionButtons.forEach((btn, idx) => {
        btn.classList.add("disabled");
        btn.setAttribute('aria-checked', 'false');
        
        if (idx === questionData.answer) {
          btn.classList.add("correct");
          btn.setAttribute('aria-label', btn.getAttribute('aria-label') + ' - ì •ë‹µ');
        }
        if (idx === choiceIdx && !isCorrect) {
          btn.classList.add("wrong");
          btn.setAttribute('aria-label', btn.getAttribute('aria-label') + ' - ì˜¤ë‹µ');
        }
      });

      selectedButton.setAttribute('aria-checked', 'true');

      if (isCorrect) {
        gameState.score += SCORE_PER_QUESTION;
        showFeedback(true, questionData.explanation);
        announceToScreenReader("ì •ë‹µì…ë‹ˆë‹¤!");
      } else {
        showFeedback(false, questionData.explanation);
        announceToScreenReader("ì˜¤ë‹µì…ë‹ˆë‹¤. " + questionData.explanation);
      }

      updateUI();
      elements.nextBtn.disabled = false;
      elements.nextBtn.focus();
    }

    function showFeedback(isCorrect, explanation) {
      elements.feedback.textContent = (isCorrect ? "âœ… ì •ë‹µ! " : "âŒ ì˜¤ë‹µ. ") + explanation;
      elements.feedback.classList.add('show', isCorrect ? 'correct' : 'wrong');
    }

    function nextQuestion() {
      if (gameState.current < gameState.totalQuestions - 1) {
        gameState.current += 1;
        updateUI();
        renderQuestion();
      } else {
        finishQuiz();